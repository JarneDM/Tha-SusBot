datasource db {
  provider = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id            String   @id
  username      String?
  discriminator String?
  createdAt     DateTime @default(now())

  voiceSessions VoiceSession[]
}

model VoiceChannel {
  id        String   @id
  name      String
  createdAt DateTime @default(now())

  voiceSessions VoiceSession[]
}

model VoiceSession {
  id          String    @id @default(cuid())
  userId      String
  channelId   String
  joinedAt    DateTime
  leftAt      DateTime?
  durationSec Int?

  user    User         @relation(fields: [userId], references: [id], onDelete: Cascade)
  channel VoiceChannel @relation(fields: [channelId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([channelId])
  @@index([joinedAt])
}
